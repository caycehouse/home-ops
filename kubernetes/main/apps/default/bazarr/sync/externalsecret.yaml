---
# yaml-language-server: $schema=https://kubernetes-schemas.devbu.io/external-secrets.io/externalsecret_v1beta1.json
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: bazarr-sync
  namespace: default
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword-connect
  target:
    name: bazarr-sync-secret
    template:
      engineVersion: v2
      data:
        config.yaml: |
          #config file example, please don't use quotes
          ###########################
          #
          #Address: the address of your bazarr instance. this can be either an ip address or a url (if you reverse proxy bazarr),
          #this can also be bazarr's container name if you use docker, make sure bazarr-sync instance is in the same network as bazarr and the network not the default
          #docker network as name resolution won't happen there.
          Address: bazarr.default.svc.cluster.local
          #
          #Port: bazarrs port. by default bazarr uses 6767. in case of reverse proxy, you can use 443 or 80 as per your configuration
          Port: 80
          #
          #protocol: this can be http or https
          Protocol: http
          #
          #ApiToken: you can get this from bazarr setting>general . no quotes needed.
          ApiToken: {{ .BAZARR_API_KEY }}
  dataFrom:
    - extract:
        key: bazarr
