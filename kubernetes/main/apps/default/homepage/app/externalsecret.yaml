---
# yaml-language-server: $schema=https://kubernetes-schemas.pages.dev/external-secrets.io/externalsecret_v1beta1.json
apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: homepage
spec:
  secretStoreRef:
    kind: ClusterSecretStore
    name: onepassword-connect
  target:
    name: homepage-secret
    template:
      engineVersion: v2
      data:
        HOMEPAGE_VAR_BAZARR_API_KEY: "{{ .BAZARR_API_KEY }}"
        bookmarks.yaml: |
          ---
          - Developer:
            - Github:
                - icon: github
                  href: https://github.com/
            - kubesearch:
                - icon: https://avatars1.githubusercontent.com/u/61287648
                  href: https://kubesearch.dev/
            - IT-Tools:
                - icon: it-tools
                  href: https://it-tools.tech/
          - Social:
              - Reddit:
                  - icon: reddit
                    href: https://reddit.com/
          - Entertainment:
              - YouTube:
                  - icon: youtube
                    href: https://youtube.com/
          - Gaming:
              - BeforeIPlay:
                  - icon: https://beforeiplay.com/images/beforeiplaylogo.png
                    href: https://beforeiplay.com/

        docker.yaml: |
          ---

        kubernetes.yaml: |
          ---
          mode: cluster

        services.yaml: |
          ---
          - Games:
                - All in One:
                      icon: https://media.forgecdn.net/avatars/342/91/637485703554418199.png
                      description: Modded One Block
                - Minecraft:
                      icon: minecraft
                      description: Vanilla Minecraft server
                - OceanBlock:
                      icon: https://www.feed-the-beast.com/_next/image?url=https%3A%2F%2Fapps.modpacks.ch%2Fmodpacks%2Fart%2F87%2Flogo.png&w=256&q=100
                      description: Time to dive in!
                - Satisfactory:
                      icon: https://cdn2.steamgriddb.com/icon_thumb/a12848aeac58ac57e95977f93fec17fd.png
                      description: The factory must prevail!
                - Valheim:
                      icon: https://cdn2.steamgriddb.com/icon/a0b83c02d720415dada82e08bc09e9f3/32/256x256.png
                      description: Sk√•l!
          - Remote Access:
                - R630 iDRAC:
                      icon: idrac
                      description: Dell Remote Access Controller
                      href: https://192.168.6.248
                      ping: 192.168.6.248
                - R730XD iDRAC:
                      icon: idrac
                      description: Dell Remote Access Controller
                      href: https://192.168.5.198
                      ping: 192.168.5.198
          - Storage:
                - TrueNAS Scale:
                      icon: truenas-scale
                      description: Storage Server
                      href: https://truenas-scale
                      ping: 192.168.7.28
          - Utilities:
                - OctoPi:
                      description: 3D printer web interface
                      href: https://octopi
                      icon: octoprint
                      widget:
                        key: {{ .OCTOPI_API_KEY }}
                        type: octoprint
                        url: http://octopi.network.svc.cluster.local
                - Proxmox:
                      icon: proxmox
                      description: Virtualization platform
                      href: https://cupcakes.dog-hen.ts.net:8006
                      ping: localhost

        settings.yaml: |
          ---
          color: indigo
          iconStyle: theme
          layout:
            Games:
              columns: 3
              style: row
            News:
              columns: 3
              style: row
            Utilities:
              columns: 3
              style: row
          useEqualHeights: true

        widgets.yaml: |
          ---
          - resources:
              cpu: true
              memory: true
              disk: /
              uptime: true
          - search:
              provider: google
              focus: true
              target: _blank
  dataFrom:
    - extract:
        key: octopi
